import{r as u,j as s}from"./app-CdShcMlD.js";import{A as y}from"./AdminLayout-DfABNq_4.js";import{f as t}from"./button-qMflEE26.js";import{f as n}from"./id-VFStllgx.js";import{a as N}from"./addMonths-MMVoVJT0.js";import"./index-BhYRhXLK.js";import"./index-CK3ea2mY.js";import"./index-D4LVa2DV.js";import"./index-BAsQtB3X.js";import"./index-DCrH9pSH.js";import"./chevron-right-D27n2588.js";import"./check-CBDrc-7m.js";import"./createLucideIcon-nATgIwpp.js";import"./x-BdUYRWUt.js";import"./index-f8F551R6.js";const A=({pesanan:a})=>{var c,o,x,m;const[b,f]=u.useState(!1);a.jenis_pesanan;const h=e=>{const r=e.tipe_item==="sewa"?1e5*e.durasi:0;return{hargaGas:e.harga-r,hargaSewa:r}},p=e=>e.details.some(r=>r.tipe_item==="sewa"),j=e=>{const r=e.details.filter(d=>d.tipe_item==="sewa").reduce((d,g)=>d+g.durasi,0),l=new Date(e.tgl_pesanan),i=N(l,r);return`${n(l,"dd MMM yyyy")} - ${n(i,"dd MMM yyyy")}`};return s.jsxs(y,{children:[s.jsxs("div",{className:"bg-blue-700 text-white px-6 py-4 rounded-t-md",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Detail Transaksi"}),s.jsxs("p",{className:"text-sm mt-1",children:["Nomor Invoice:"," ",s.jsx("strong",{children:a.nomor_invoice||`#${a.id}`})]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold mb-1",children:"Informasi Pemesanan"}),s.jsxs("p",{children:["Tanggal pesanan:"," ",s.jsx("strong",{children:n(new Date(a.tgl_pesanan),"dd MMM yyyy")})]}),s.jsxs("p",{children:["Metode pembayaran:"," ",s.jsx("strong",{children:a.metode_pembayaran||"-"})]}),s.jsxs("p",{children:["Status pembayaran:"," ",s.jsx("strong",{className:"capitalize",children:a.keterangan})]}),s.jsxs("p",{children:["Status pengiriman:"," ",s.jsx("strong",{className:"capitalize",children:a.status||"-"})]}),p(a)&&s.jsxs("div",{className:"mt-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-3 rounded",children:[s.jsxs("p",{className:"font-semibold",children:["🛢️ Pesanan ini mengandung"," ",s.jsx("span",{className:"underline",children:"Sewa Tabung"}),"."]}),s.jsxs("p",{children:["Masa sewa:"," ",s.jsx("strong",{children:j(a)})]}),s.jsxs("p",{children:["Biaya sewa: ",s.jsx("strong",{children:"Rp100.000/bulan"})," ","(belum termasuk isi gas)"]})]}),a.keterangan==="Cicilan"&&s.jsxs("p",{className:"text-orange-600 mt-1",children:["Sisa tagihan:"," ",s.jsx("strong",{children:t(a.total-a.jumlah_terbayar)})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold mb-1",children:"Informasi Pengiriman"}),s.jsxs("p",{children:["Penerima:"," ",s.jsx("strong",{children:((c=a.pelanggan)==null?void 0:c.nama_pelanggan)||"-"})]}),s.jsxs("p",{children:["Alamat:"," ",s.jsx("strong",{children:((o=a.pelanggan)==null?void 0:o.alamat)||"-"})]}),s.jsxs("p",{children:["No. Telp:"," ",s.jsx("strong",{children:((x=a.pelanggan)==null?void 0:x.no_hp)||"-"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border text-sm",children:[s.jsx("thead",{className:"bg-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-2",children:"Produk"}),s.jsx("th",{className:"text-left px-4 py-2",children:"Tipe"}),s.jsx("th",{className:"text-left px-4 py-2",children:"Masa Sewa"}),s.jsx("th",{className:"text-left px-4 py-2",children:"Jumlah"}),s.jsx("th",{className:"text-left px-4 py-2",children:"Harga/unit"}),s.jsx("th",{className:"text-left px-4 py-2",children:"Subtotal"})]})}),s.jsxs("tbody",{children:[a.details.map((e,r)=>{var i;const{hargaGas:l}=h(e);return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"px-4 py-2",children:(i=e.produk)==null?void 0:i.nama_produk}),s.jsx("td",{className:"px-4 py-2 capitalize",children:e.tipe_item}),s.jsx("td",{className:"px-4 py-2",children:e.tipe_item==="sewa"?`${e.durasi} bln`:"-"}),s.jsxs("td",{className:"px-4 py-2",children:[e.quantity," tabung"]}),s.jsx("td",{className:"px-4 py-2",children:e.tipe_item==="sewa"?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{children:["Sewa:"," ",t(1e5)," x"," ",e.durasi]}),s.jsxs("div",{children:["Gas:"," ",t(l)]})]}):t(e.harga)}),s.jsx("td",{className:"px-4 py-2",children:t(e.harga*e.quantity)})]},r)}),s.jsxs("tr",{className:"font-bold border-t bg-gray-100",children:[s.jsx("td",{className:"px-4 py-2",colSpan:5,children:"Total"}),s.jsx("td",{className:"px-4 py-2 text-blue-700",children:t(a.total)})]})]})]})}),((m=a.riwayat_pembayaran)==null?void 0:m.length)>0&&s.jsxs("div",{className:"mt-6 pt-4 border-t",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Riwayat Pembayaran"}),s.jsx("ul",{className:"space-y-2",children:a.riwayat_pembayaran.map((e,r)=>s.jsxs("li",{className:"border p-3 rounded bg-gray-50 text-sm",children:[s.jsxs("div",{children:[s.jsxs("strong",{children:["Rp"," ",Number(e.jumlah_bayar).toLocaleString("id-ID")]})," ","-"," ",new Date(e.created_at).toLocaleDateString("id-ID")]}),e.bukti_transfer&&s.jsxs("div",{className:"mt-1",children:[s.jsx("a",{href:`/storage/${e.bukti_transfer}`,target:"_blank",className:"text-blue-600 hover:underline",children:"Lihat Bukti Transfer"}),e.bukti_transfer.endsWith(".pdf")?s.jsx("iframe",{src:`/storage/${e.bukti_transfer}`,className:"w-full h-64 mt-2 border rounded"}):s.jsx("img",{src:`/storage/${e.bukti_transfer}`,alt:"Bukti Transfer",className:"mt-2 max-w-xs rounded border"})]})]},r))})]})]})]})};export{A as default};
